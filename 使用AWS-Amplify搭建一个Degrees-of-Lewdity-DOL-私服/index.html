<!DOCTYPE html><html lang="zh"><head><meta charset="UTF-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>程序员玛丽的星海方舟 | 使用AWS Amplify搭建一个Degrees of Lewdity(DOL)私服</title><meta name="description" content="&lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;最近迷上了一款文字纯爱战斗冒险游戏（雾），我本人是用 iPhone 手机玩所以一直都是玩的 web 版本。一开始玩的是汉化组提供的 GitHub Pages 线上版，后来又玩了 DOL-Lyra 的美化封装版，也是有 GitHub Pages 线上版。玩了几个档以后开始尝试自己折腾模组，学会用&lt;a href=&quot;https://github.com/cphxj123&quot;&gt;北极星&lt;/a&gt;大佬提供的美化模组生成器，可以把一些旧时代的直接覆盖游戏图片的美化模组封装成 mod loader 版本。后来又想尝试一下&lt;a href=&quot;https://github.com/cphxj123/Dol-BJX-Ex&quot;&gt;北极星扩展&lt;/a&gt;，这回提供的是游戏本体 html 且没有直接提供的线上部署版，于是想着尝试自己弄一个静态 web 服务来托管这个游戏，并且看看能不能做一些不同的美化组合的快捷切换方式（mod loader 的模组顺序和启用切换还是太累，不是很好用）。最后算是弄出来了一个比较满意的成果，于是发个帖子分享一下我的操作路径。&lt;/p&gt;"><link rel="icon" href="https://cdn.jsdelivr.net/gh/MaryCLY/blog_cdn/source/images/物理2-飞船2.svg"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700"><link rel="stylesheet" href="/css/highlights/darkula.css"><link rel="stylesheet" href="/css/main.css"><link rel="search" type="application/opensearchdescription+xml" href="https://MaryCLY.github.io/atom.xml" title="程序员玛丽的星海方舟"><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="程序员玛丽的星海方舟" type="application/atom+xml">
</head><body><div class="container"><header class="main-header"><h1 class="main-header__title uplize"><a class="main-header__title__link" href="/">程序员玛丽的星海方舟</a></h1><nav class="main-header__nav"><ul class="main-nav"><li class="main-nav__list"><a class="main-nav__list__link" href="/" target="_self">HOME</a></li><li class="main-nav__list"><a class="main-nav__list__link" href="/about/" target="_self">ABOUT</a></li><li class="main-nav__list"><a class="main-nav__list__link" href="/archives/" target="_self">ARCHIVE</a></li><li class="main-nav__list"><a class="main-nav__list__link" href="https://github.com/maryCLY" target="_blank">GITHUB</a></li></ul></nav></header><main class="container__wrapper"><article class="article post"><h1 class="article__title">使用AWS Amplify搭建一个Degrees of Lewdity(DOL)私服</h1><div class="article__date metadata"><div class="post-info">2024/02/04</div></div><div class="article__categories metadata">分类:
<a class="article__categories__link metadata" href="/categories/%E5%BC%80%E5%8F%91/">开发</a></div><div class="article__tags metadata">标签:
<a class="article__tags__link metadata" href="/tags/DOL/">DOL</a><a class="article__tags__link metadata" href="/tags/AWS/">AWS</a></div><div class="article__body"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>最近迷上了一款文字纯爱战斗冒险游戏（雾），我本人是用 iPhone 手机玩所以一直都是玩的 web 版本。一开始玩的是汉化组提供的 GitHub Pages 线上版，后来又玩了 DOL-Lyra 的美化封装版，也是有 GitHub Pages 线上版。玩了几个档以后开始尝试自己折腾模组，学会用<a target="_blank" rel="noopener" href="https://github.com/cphxj123">北极星</a>大佬提供的美化模组生成器，可以把一些旧时代的直接覆盖游戏图片的美化模组封装成 mod loader 版本。后来又想尝试一下<a target="_blank" rel="noopener" href="https://github.com/cphxj123/Dol-BJX-Ex">北极星扩展</a>，这回提供的是游戏本体 html 且没有直接提供的线上部署版，于是想着尝试自己弄一个静态 web 服务来托管这个游戏，并且看看能不能做一些不同的美化组合的快捷切换方式（mod loader 的模组顺序和启用切换还是太累，不是很好用）。最后算是弄出来了一个比较满意的成果，于是发个帖子分享一下我的操作路径。</p>
<span id="more"></span>

<h2 id="托管服务的选择"><a href="#托管服务的选择" class="headerlink" title="托管服务的选择"></a>托管服务的选择</h2><p>首先作为个人自用的小站点，也没有安全性要求，优先选择便宜甚至免费的服务。目前 GitHub Pages 托管静态站点是免费无限制使用的；AWS Amplify 是前 12 个月免费，不使用 SSR 的话部署不到 1GB 的数据月费也很低，最多不到 1 刀吧。考虑了一下 AWS 我没用过，这个网站也没有公开的需求，干脆用它搭一个试试。（Github Pages 也很好的，推荐使用）</p>
<h2 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h2><p>现在主流的模组管理方法是通过 mod loader 来管理，网络上都可以直接下到内置 mod loader 的游戏本体。它们基本上只包含一个 html 文件，原版图片包和 i18n 等都需要通过 mod 的形式传入。</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/Eltirosto/Degrees-of-Lewdity-Chinese-Localization/releases">最新汉化版游戏本体</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/cphxj123/Dol-BJX-Ex">包含北极星拓展的汉化版游戏本体</a></li>
</ul>
<p>下载了游戏本体后，还需要下载所需预安装的相关 mod 文件。</p>
<h2 id="单个游戏程序的部署代码"><a href="#单个游戏程序的部署代码" class="headerlink" title="单个游戏程序的部署代码"></a>单个游戏程序的部署代码</h2><p>以最新汉化版游戏本体为例，游戏本体关键文件目录是这样的：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">index.html</span><br><span class="line">style.css</span><br></pre></td></tr></table></figure>

<p>（注：release 包里有多个文件，只有 html 和 css 这两个是游戏本体）</p>
<p>如果需要在进入游戏程序时预加载模组，我们需要在 index.html 的同目录下新建一个 modList.json 文件，里面的内容是一个包含模组加载路径的数组。预加载的模组可以存放在服务器上，我们就直接在根目录下建一个 mods 文件夹，里面存放.mod.zip 文件，然后使用相对路径引用。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">index.html</span><br><span class="line">style.css</span><br><span class="line">modList.json +</span><br><span class="line">mods +</span><br><span class="line">- GameOriginalImagePack-0.4.5.3.mod.zip +</span><br><span class="line">- ModI18N-0.4.5.3-chs-alpha1.5.0.mod.zip +</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><figcaption><span>modList.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    <span class="string">&quot;mods/GameOriginalImagePack-0.4.5.3.mod.zip&quot;</span>,</span><br><span class="line">    <span class="string">&quot;mods/ModI18N-0.4.5.3-chs-alpha1.5.0.mod.zip&quot;</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>如此这般，单个游戏程序的部署代码就完成了。你可以建一个 GitHub 仓库来管理它。</p>
<h2 id="用-AWS-Amplify-部署"><a href="#用-AWS-Amplify-部署" class="headerlink" title="用 AWS Amplify 部署"></a>用 AWS Amplify 部署</h2><p>在 AWS 控制台里可以找到这样的选项：“创建静态 web 服务”，进入配置页，连接到你的 GitHub 仓库并选择相应分支。可以允许 AWS 在 GitHub 提交更新时自动部署。配置项按照默认的来即可，等待 AWS 进行初次构建和部署，提示完成以后这个服务就创建好了。</p>
<p>浏览器通常会自动以 index.html 作为重定向入口，所以部署成功后直接访问 AWS 提供的域名就会进到游戏里面，打开 mod loader 就可以看到你在 modList.json 中选择的 mod 已经加载。如果你有自己的域名，可以不使用 AWS 提供的随机域名，在应用程序设置-域管理中绑定自己的域名。</p>
<p>如果你不想让陌生人访问你的站点，可以在应用程序设置-访问控制中添加限制，访问站点时会要求输入用户名和密码。</p>
<h2 id="在一个站点上实现不同模组组合的切换"><a href="#在一个站点上实现不同模组组合的切换" class="headerlink" title="在一个站点上实现不同模组组合的切换"></a>在一个站点上实现不同模组组合的切换</h2><p>如果你也像我一样需要经常调整 mod 组合，那么可以接着看下去。大致的思路是做多个子页面，每个子页面都有一个 index.html 和 modList.json，mod 文件则都放在一个文件夹里复用。文件目录大致如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mods</span><br><span class="line">- mod1.mod.zip</span><br><span class="line">- mod2.mod.zip</span><br><span class="line">game1</span><br><span class="line">- index.html</span><br><span class="line">- modList.json</span><br><span class="line">game2</span><br><span class="line">- index.html</span><br><span class="line">- modList.json</span><br><span class="line">index.html</span><br></pre></td></tr></table></figure>

<p>代码编写示例如下：</p>
<figure class="highlight json"><figcaption><span>game1/modList.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    <span class="string">&quot;../mods/mod1.mod.zip&quot;</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><figcaption><span>game2/modList.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    <span class="string">&quot;../mods/mod2.mod.zip&quot;</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><figcaption><span>index.html</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 一个简陋的选择页 --&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-CN&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>Degrees of Lewdity 游戏选择页<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/game1&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_self&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span>game1&lt;/a</span><br><span class="line">        &gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/game2&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_self&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span>game2&lt;/a</span><br><span class="line">        &gt;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>我自己使用的部署代码可以参考：<a target="_blank" rel="noopener" href="https://github.com/MaryCLY/Degrees-of-Lewdity-Chinese-Localization/tree/build_clymini">GitHub链接</a></p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>用这种方式实现的模组组合切换我还是比较满意的，首先是静态网站无需搭后端服务，总共的存储数据量也不是很大。因为是同一个站点，浏览器缓存是共通的，所以切换mod组合甚至本体也不需要导入导出存档（虽然本体切换有跳error的风险，但是保留成就点数还是需要导存档的啊）。日后如果有时间的话也可以研究研究有没有更省空间的方式来做这样的切换模组服务。</p>
</div></article><div class="pagination"><a class="pagination__link pagination__next" href="/Vue%E7%BB%84%E4%BB%B6%E5%A4%8D%E5%88%B6%E5%AE%9E%E7%8E%B0%E6%A8%A1%E5%9D%97%E6%94%BE%E5%A4%A7%E7%BB%88%E6%9E%81%E4%BC%98%E5%8C%96%E7%89%88/">下一篇</a></div></main><footer class="footer metadata"><p class="footer__text">© 2024 陈俪影</p><p class="footer__text">Powered by <a class="footer__text__link" href="https://hexo.io/" target="_blank">Hexo</a> &amp; <a class="footer__text__link" href="https://pages.github.com/" target="_blank">Github Page</a></p></footer></div></body></html>